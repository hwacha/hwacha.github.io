
<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <title>
      Bill Marcy
    </title>
    
    
    
        
        <link rel="stylesheet" href="/css/main.css">
        
    
    
  </head>
  <body>
    
    
  <section>
    <h1>Playtree</h1>
    
      
      
      <time datetime="2025-03-18T12:55:36-07:00">March 18, 2025</time>
    
    <div class="viewport">
        <div class="cube">
            <div class="face front"></div>
            <div class="face front-top"></div>
            <div class="face top"></div>
            <div class="face back-top"></div>
            <div class="face back"></div>
            <div class="face back-bottom"></div>
            <div class="face bottom"></div>
            <div class="face front-bottom"></div>
            
            <div class="face front-right"></div>
            <div class="face right"></div>
            <div class="face back-right"></div>
            
            <div class="face back-left"></div>
            <div class="face left"></div>
            <div class="face front-left"></div>
            
            <div class="face top-right"></div>
            
            <div class="face bottom-right"></div>
            
            <div class="face bottom-left"></div>
            
            <div class="face top-left"></div>
            
            <div class="face front-top-right"></div>
            <div class="face back-top-right"></div>
            <div class="face back-top-left"></div>
            <div class="face front-top-left"></div>
            <div class="face front-bottom-right"></div>
            <div class="face back-bottom-right"></div>
            <div class="face back-bottom-left"></div>
            <div class="face front-bottom-left"></div>
        </div>
    </div>
    <article>
      <p>Playtree lets users create and manage personalized music playlists that branch and loop playback. In this post, I&rsquo;ll explore the technical challenges and solutions I encountered while building Playtree.</p>
<h2 id="overview">Overview</h2>
<p>Playtree is designed to provide a novel way to interact with music. Instead of traditional linear playlists, Playtree uses a graph structure where users create <em>playnodes</em> representing musical elements, and <em>playedges</em> to define the flow of playback. Multiple playheads can be maintained simultaneously within the same playtree.</p>
<p>Key aspects of the project include:</p>
<ul>
<li><strong>Backend Development</strong>: A RESTful API built with Go handles data persistence.</li>
<li><strong>Frontend Development</strong>: A dynamic user interface developed with React allows users to create, edit and play their playtrees.</li>
<li><strong>Data Structures and Algorithms</strong>: The application uses a graph data structure to represent playlists and algorithms to manage music playback.</li>
</ul>
<h2 id="technical-details">Technical Details</h2>
<p>Let&rsquo;s dive into the specifics:</p>
<h3 id="backend">Backend</h3>
<ul>
<li>I chose Go for the backend due to its efficiency and scalability. The net/http package is used to create RESTful API endpoints.</li>
<li>Playtree data, including playlist structures, are stored in JSON files. This provides a simple way to persist and manage data.</li>
<li>A Go <a href="https://github.com/lithammer/shortuuid">shortuuid</a> library is used to generate unique IDs for each playtree.</li>
<li>A core feature of Playtree is its integration with the Spotify API. The Go server authenticates certain user requests via Spotify access tokens, which are used as proxies for the user&rsquo;s identity.</li>
</ul>
<h3 id="frontend">Frontend</h3>
<ul>
<li>The frontend is built with <a href="https://react.dev/">React</a>, a powerful library for creating interactive user interfaces. React Flow, a library for rendering and interacting with graphs, is used to build the playtree visualization and editing tools, with Dagre for auto-layouting.</li>
<li>I used <a href="https://remix.run/">Remix</a> for routing, enabling smooth navigation within the application.</li>
<li>Reducers are used for state management, helping to cleanly and efficiently update the UI in response to user interactions.</li>
<li>Custom hooks, like <code>useClickOutside</code>, are implemented to handle specific UI behaviors.</li>
</ul>
<h3 id="data-model">Data Model</h3>
<ul>
<li>The central component is the Playtree structure, which includes:
<ul>
<li><strong>Summary</strong>: Contains metadata like ID, name, creator, and access settings.</li>
<li><strong>Playnodes</strong>: Represent individual nodes in the playtree, containing information about musical elements.
<ul>
<li><strong>Limit</strong>: sets a limit on how many times a playnode can be played.</li>
<li><strong>Repeat</strong>: repeats the same playnode before selecting a playedge to walk.</li>
</ul>
</li>
<li><strong>Playedges</strong>: Define the connections between nodes, establishing the flow of music.
<ul>
<li><strong>Limit</strong>: sets a limit on how many times a playedge can be walked.</li>
<li><strong>Shares</strong>: weights the likelihood a playedge is selected.</li>
<li><strong>Priority</strong>: forces the highest priority playedges to be selected first.</li>
</ul>
</li>
<li><strong>Playroots</strong>: Define starting points for playback.</li>
<li><strong>Playscopes</strong>: Contextual scopes which restrict play counters to local contexts.</li>
</ul>
</li>
<li>To ensure data integrity, I&rsquo;ve implemented server-side syntax validation using a Go <a href="https://github.com/go-playground/validator/v10">validator</a> library and client-side semantic validation.</li>
</ul>
<h3 id="key-features">Key Features</h3>
<ul>
<li><strong>Playtree Creation and Editing</strong>: Users can intuitively create, modify, and manage their playtrees, defining the structure and rules for playback.</li>
<li><strong>Spotify Integration</strong>: Deep integration with the Spotify API enables music search, user authentication, and playback control.</li>
<li><strong>Personalized Playback</strong>: Playtree uses the defined structure and rules to generate a unique and personalized listening experience.</li>
</ul>
<h2 id="challenges-and-solutions">Challenges and Solutions</h2>
<p>Developing Playtree presented some interesting challenges:</p>
<ul>
<li>
<p>Challenge: Designing an intuitive way for users to create and visualize complex playtree structures.</p>
<ul>
<li>Solution: I developed a React-based UI with interactive components, making it easy to add, connect, and edit nodes.</li>
</ul>
</li>
<li>
<p>Challenge: Managing playback logic and state, especially with dynamic playtree structures.</p>
<ul>
<li>Solution: I used reducers for state management and implemented algorithms to handle playhead movement and music selection.</li>
</ul>
</li>
<li>
<p>Challenge: Integrating with the Spotify API for authentication and seamless music playback.</p>
<ul>
<li>Solution: I used the Spotify API to handle user authentication, search, and playback, providing a smooth experience.</li>
</ul>
</li>
</ul>
<p>I&rsquo;m proud of the result and the opportunity to apply my skills in a creative project. Playtree demonstrates my ability to work across the full stack, solve complex problems, and deliver a user-friendly application.</p>

    </article>
    <aside>
      
    </aside>
  </section>

    
    
    
  </body>
</html>
